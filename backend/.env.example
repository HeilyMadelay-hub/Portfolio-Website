# ====================================
# CONFIGURACIÓN DEL SISTEMA HÍBRIDO
# ====================================

# Framework Configuration
PORT=5000         # Puerto del servidor (por defecto 5000)
HOST=0.0.0.0      # Host del servidor
DEBUG=true        # Modo debug
WORKERS=1         # Número de workers (solo para FastAPI en producción)

# ====================================
# API KEYS & CREDENTIALS
# ====================================

# Google Gemini API
GOOGLE_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-1.5-flash  # or gemini-1.5-pro

# OpenAI API (opcional, para comparación)
OPENAI_API_KEY=your-openai-api-key-here

# ====================================
# DATABASE CONFIGURATION
# ====================================

# ChromaDB
CHROMA_PERSIST_DIRECTORY=./app/data/database
CHROMA_COLLECTION_NAME=portfolio_docs
CHROMA_EMBEDDING_MODEL=all-MiniLM-L6-v2

# Redis Cache (opcional)
REDIS_URL=redis://localhost:6379/0
REDIS_TTL=3600  # TTL en segundos

# MongoDB (opcional)
MONGODB_URI=mongodb://localhost:27017/
MONGODB_DATABASE=portfolio_chatbot

# ====================================
# RATE LIMITING
# ====================================

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT_LIMIT=100
RATE_LIMIT_DEFAULT_WINDOW=3600  # segundos
RATE_LIMIT_STORAGE=memory  # memory, redis, or mongodb

# Límites específicos por endpoint
RATE_LIMIT_CHAT=60/hour
RATE_LIMIT_SUGGEST=100/hour
RATE_LIMIT_SEARCH=200/hour
RATE_LIMIT_ADMIN=10/hour

# ====================================
# SECURITY
# ====================================

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-API-Key,Accept-Language

# JWT Configuration (si se implementa autenticación)
JWT_SECRET_KEY=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=30

# API Keys (para acceso privilegiado)
API_KEYS=key1,key2,key3  # Lista separada por comas

# ====================================
# LANGUAGE & LOCALIZATION
# ====================================

# Supported Languages
SUPPORTED_LANGUAGES=es,en,fr,de,it,pt
DEFAULT_LANGUAGE=es
AUTO_DETECT_LANGUAGE=true

# ====================================
# EMERGENCY MODE
# ====================================

# Emergency Mode Configuration
EMERGENCY_MODE_ENABLED=true
EMERGENCY_MODE_THRESHOLD_ERRORS=5
EMERGENCY_MODE_THRESHOLD_TIME=60  # segundos
EMERGENCY_MODE_AUTO_RECOVERY=true
EMERGENCY_MODE_RECOVERY_TIME=300  # segundos

# ====================================
# MONITORING & LOGGING
# ====================================

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=logs/chatbot.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Sentry (Error Tracking)
SENTRY_DSN=your-sentry-dsn-here
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus Metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# ====================================
# CACHE CONFIGURATION
# ====================================

# Cache Settings
CACHE_ENABLED=true
CACHE_TYPE=memory  # memory, redis, or file
CACHE_DEFAULT_TTL=3600  # segundos
CACHE_MAX_SIZE=1000  # número máximo de entradas
CACHE_EVICTION_POLICY=lru  # lru, lfu, or fifo

# ====================================
# DOCUMENT PROCESSING
# ====================================

# Document Settings
DOCUMENTS_PATH=./app/data/documents
DOCUMENTS_LANGUAGE_ES=datos_base_es
DOCUMENTS_LANGUAGE_EN=datos_base_traducidos
DOCUMENTS_CHUNK_SIZE=500
DOCUMENTS_CHUNK_OVERLAP=50
CHUNK_SIZE=500
CHUNK_OVERLAP=50
DOCUMENTS_AUTO_RELOAD=false
DOCUMENTS_RELOAD_INTERVAL=3600  # segundos

# ====================================
# AI MODEL CONFIGURATION
# ====================================

# Model Parameters
MODEL_TEMPERATURE=0.7
MODEL_MAX_TOKENS=2048
MODEL_TOP_P=0.9
MODEL_TOP_K=40
MODEL_FREQUENCY_PENALTY=0.0
MODEL_PRESENCE_PENALTY=0.0

# Embedding Configuration
EMBEDDING_MODEL=all-MiniLM-L6-v2
EMBEDDING_DIMENSION=384
EMBEDDING_BATCH_SIZE=32

# RAG Configuration
RAG_SIMILARITY_TOP_K=5
SIMILARITY_TOP_K=5
RAG_SIMILARITY_THRESHOLD=0.7
RAG_CONTEXT_MAX_LENGTH=2000

# ====================================
# SAFETY & CONTENT FILTERING
# ====================================

# Safety Configuration
SAFETY_CHECK_ENABLED=true
SAFETY_BLOCK_HARMFUL=true
SAFETY_BLOCK_HATE_SPEECH=true
SAFETY_BLOCK_SEXUALLY_EXPLICIT=true
SAFETY_BLOCK_DANGEROUS=true
SAFETY_CONFIDENCE_THRESHOLD=0.8

# Content Filtering
CONTENT_MAX_LENGTH=5000
CONTENT_MIN_LENGTH=1
CONTENT_FILTER_PROFANITY=true
CONTENT_FILTER_PII=true  # Personal Identifiable Information

# ====================================
# PERFORMANCE
# ====================================

# Performance Tuning
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30  # segundos
CONNECTION_POOL_SIZE=20
THREAD_POOL_SIZE=10

# ====================================
# DEVELOPMENT & TESTING
# ====================================

# Testing Configuration
TESTING_MODE=false
TESTING_MOCK_GEMINI=false
TESTING_MOCK_CHROMADB=false
TESTING_USE_FIXTURES=true

# Development Tools
ENABLE_SWAGGER=true
ENABLE_REDOC=true
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILING=false

# ====================================
# DEPLOYMENT
# ====================================

# Deployment Configuration
ENVIRONMENT=development  # development, staging, or production
SERVER_NAME=localhost
SECRET_KEY=your-secret-key-change-this-in-production
BEHIND_PROXY=false
PROXY_COUNT=1

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30  # segundos

# ====================================
# FEATURE FLAGS
# ====================================

# Feature Toggles
FEATURE_FAQ_CLASSIFIER=true
FEATURE_SECTION_VALIDATION=true
FEATURE_EMERGENCY_MODE=true
FEATURE_SAFETY_CHECKER=true
FEATURE_I18N=true
FEATURE_RATE_LIMITING=true
FEATURE_CACHING=true
FEATURE_MONITORING_DASHBOARD=true

# ====================================
# EXTERNAL SERVICES
# ====================================

# External API Timeouts
EXTERNAL_API_TIMEOUT=10  # segundos
EXTERNAL_API_RETRY_COUNT=3
EXTERNAL_API_RETRY_DELAY=1  # segundos

# Webhook Configuration (opcional)
WEBHOOK_ENABLED=false
WEBHOOK_URL=https://your-webhook-url.com/endpoint
WEBHOOK_SECRET=your-webhook-secret

# ====================================
# BACKUP & RECOVERY
# ====================================

# Backup Configuration
BACKUP_ENABLED=false
BACKUP_INTERVAL=86400  # 24 horas en segundos
BACKUP_PATH=./backups
BACKUP_RETAIN_DAYS=30

# ====================================
# NOTES
# ====================================
# 1. Copia este archivo a .env y ajusta los valores
# 2. NUNCA commits el archivo .env con valores reales
# 3. En producción, usa variables de entorno del sistema
# 4. Revisa la documentación para detalles de cada variable
# ====================================
